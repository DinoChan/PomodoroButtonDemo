<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:interactivity="using:Microsoft.Xaml.Interactivity"
    xmlns:behaviors="using:Microsoft.Toolkit.Uwp.UI.Animations.Behaviors"
    xmlns:local="using:PomodoroButtonDemo"
    xmlns:controls="using:Microsoft.Toolkit.Uwp.UI.Controls">

    <Style TargetType="local:OutlinePanel">
        <Setter Property="IsTabStop" Value="False" />
        <Setter Property="HorizontalAlignment" Value="Stretch"/>
        <Setter Property="VerticalAlignment" Value="Stretch"/>
        <Setter Property="IsHitTestVisible" Value="False"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:OutlinePanel">
                    <Grid>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualStateGroup.Transitions>
                                    <VisualTransition From="Normal" To="PointerOver" >
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="OutlineBorder" Storyboard.TargetProperty="Opacity" To="0" Duration="0:0:0.8">
                                                <DoubleAnimation.EasingFunction>
                                                    <CubicEase EasingMode="EaseOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>

                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="OutlineBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                <DiscreteObjectKeyFrame KeyTime="00:00:00" Value="Visible"/>
                                                <DiscreteObjectKeyFrame KeyTime="00:00:0.8" Value="Collapsed"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualTransition>
                                    <VisualTransition To="Normal" >
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="OutlineBorder" Storyboard.TargetProperty="Opacity" To="0.3" Duration="0:0:1.5">
                                                <DoubleAnimation.EasingFunction>
                                                    <CubicEase EasingMode="EaseOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>

                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="OutlineBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                <DiscreteObjectKeyFrame KeyTime="00:00:00" Value="Visible"/>
                                                <DiscreteObjectKeyFrame KeyTime="00:00:0.8" Value="Collapsed"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualTransition>
                                </VisualStateGroup.Transitions>
                                <VisualState x:Name="Normal" >
                                    <VisualState.Setters>
                                        <Setter Target="Scale.ScaleX" Value="1"/>
                                        <Setter Target="Scale.ScaleY" Value="1"/>
                                        <Setter Target="OutlineBorder.Opacity" Value="0.3"/>
                                        <Setter Target="OutlineBorder.Visibility" Value="Collapsed"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="PointerOver">
                                    <VisualState.Setters>
                                        <Setter Target="Scale.ScaleX" Value="2.5"/>
                                        <Setter Target="Scale.ScaleY" Value="2.5"/>
                                        <Setter Target="OutlineBorder.Opacity" Value="0"/>
                                        <Setter Target="OutlineBorder.Visibility" Value="Visible"/>
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Border x:Name="OutlineBorder" 
                                Visibility="Collapsed" 
                                Opacity="0.5"
                                HorizontalAlignment="{TemplateBinding HorizontalAlignment}"
                                VerticalAlignment="{TemplateBinding HorizontalAlignment}" >
                            <interactivity:Interaction.Behaviors>
                                <behaviors:Scale x:Name="Scale"
                                                    ScaleX="1"
                                                    ScaleY="1"
                                                    CenterX="12"
                                                    CenterY="12"
                                                    Duration="800"
                                                    Delay="0"
                                                    EasingType="Cubic"
                                                    EasingMode="EaseOut"
                                                    AutomaticallyStart="True"/>
                            </interactivity:Interaction.Behaviors>
                        </Border>
                    </Grid>

                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>


    <Style TargetType="local:InsetPanel" >
        <Setter Property="IsTabStop" Value="False" />
        <Setter Property="HorizontalAlignment" Value="Stretch"/>
        <Setter Property="VerticalAlignment" Value="Stretch"/>
        <Setter Property="IsHitTestVisible" Value="False"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:InsetPanel">
                    <Grid>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualStateGroup.Transitions>
                                    <VisualTransition From="Normal" To="PointerOver" GeneratedDuration="0:0:0.5">
                                        <VisualTransition.GeneratedEasingFunction>
                                            <CubicEase EasingMode="EaseOut" />
                                        </VisualTransition.GeneratedEasingFunction>
                                    </VisualTransition>
                                    <VisualTransition To="Normal" GeneratedDuration="0:0:0.5">
                                        <VisualTransition.GeneratedEasingFunction>
                                            <CubicEase EasingMode="EaseIn" />
                                        </VisualTransition.GeneratedEasingFunction>
                                    </VisualTransition>
                                </VisualStateGroup.Transitions>
                                <VisualState x:Name="Normal" >
                                    <VisualState.Setters>
                                        <Setter Target="OutlineBorder.Opacity" Value="0"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="PointerOver">
                                    <VisualState.Setters>
                                        <Setter Target="OutlineBorder.Opacity" Value="1"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="Pressed">
                                    <VisualState.Setters>
                                        <Setter Target="OutlineBorder.Opacity" Value="0.8"/>
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Border x:Name="OutlineBorder" />


                    </Grid>

                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>


    <Style TargetType="local:InsetDropShadowPanel">
        <Setter Property="IsTabStop"
                Value="False" />
        <Setter Property="HorizontalAlignment" Value="Stretch"/>
        <Setter Property="HorizontalContentAlignment" Value="Left"/>
        <Setter Property="VerticalAlignment" Value="Stretch"/>
        <Setter Property="VerticalContentAlignment" Value="Stretch"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:InsetDropShadowPanel">
                    <Grid Background="{TemplateBinding Background}"
                          BorderBrush="{TemplateBinding BorderBrush}"
                          BorderThickness="{TemplateBinding BorderThickness}"
                          HorizontalAlignment="{TemplateBinding HorizontalAlignment}"
                          VerticalAlignment="{TemplateBinding VerticalAlignment}">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualStateGroup.Transitions>
                                    <VisualTransition From="Normal" To="PointerOver" GeneratedDuration="0:0:0.5">
                                        <!--<VisualTransition.GeneratedEasingFunction>
                                            <CubicEase EasingMode="EaseOut" />
                                        </VisualTransition.GeneratedEasingFunction>-->
                                    </VisualTransition>
                                    <VisualTransition To="Normal" GeneratedDuration="0:0:0.5">
                                        <!--<VisualTransition.GeneratedEasingFunction>
                                            <CubicEase EasingMode="EaseIn" />
                                        </VisualTransition.GeneratedEasingFunction>-->
                                    </VisualTransition>
                                </VisualStateGroup.Transitions>
                                <VisualState x:Name="Normal" >
                                   
                                </VisualState>
                                <VisualState x:Name="PointerOver">
                                    <VisualState.Setters>
                                        <Setter Target="Shadow.Color" Value="White"/>
                                        <!--<Setter Target="Shadow.OffsetX" Value="0"/>
                                        <Setter Target="Shadow.OffsetY" Value="0"/>-->
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="Pressed">
                                    <VisualState.Setters>
                                        <!--<Setter Target="Shadow.Color" Value="White"/>-->
                                        <Setter Target="Shadow.OffsetX" Value="0"/>
                                        <Setter Target="Shadow.OffsetY" Value="0"/>
                                        <Setter Target="Shadow.Opacity" Value="0.8"/>
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <controls:DropShadowPanel
                            x:Name="Shadow"
                            Content="{TemplateBinding Content}"
                            Color="{TemplateBinding Color}"
                            ShadowOpacity="{TemplateBinding ShadowOpacity}"
                            BlurRadius="{TemplateBinding BlurRadius}"
                             OffsetX="{TemplateBinding OffsetX}"
                            OffsetY="{TemplateBinding OffsetY}"
                            OffsetZ="{TemplateBinding OffsetZ}"/>

                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:PomodoroStateButton">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Foreground" Value="Transparent"/>
        <Setter Property="BorderBrush" Value="{ThemeResource SystemBaseHighColor}"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="ShadowColor" Value="Black"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:PomodoroStateButton">
                    <Border Background="{TemplateBinding Background}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Padding="{TemplateBinding Padding}"
                            x:Name="RootGrid">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <!--<VisualStateGroup.Transitions>
                                    <VisualTransition From="Normal" To="PointerOver" >
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="Shadow" Storyboard.TargetProperty="ShadowOpacity" To="0" Duration="0:0:0.5">
                                                <DoubleAnimation.EasingFunction>
                                                    <CubicEase EasingMode="EaseOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                        </Storyboard>
                                    </VisualTransition>
                                    <VisualTransition To="Normal" >
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="Shadow" Storyboard.TargetProperty="ShadowOpacity" To="1" Duration="0:0:0.5">
                                                <DoubleAnimation.EasingFunction>
                                                    <CubicEase EasingMode="EaseOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                        </Storyboard>
                                    </VisualTransition>
                                </VisualStateGroup.Transitions>-->
                                <VisualState x:Name="Normal" >
                                    <VisualState.Setters>
                                        <Setter Target="Outline.State" Value="Normal"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="PointerOver">
                                    <VisualState.Setters>
                                        <Setter Target="Outline.State" Value="PointerOver"/>
                                        <Setter Target="Shadow.State" Value="PointerOver"/>
                                        <!--<Setter Target="Shadow.ShadowOpacity" Value="0"/>-->
                                    </VisualState.Setters>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <VisualState.Setters>
                                        <Setter Target="Outline.State" Value="Pressed"/>
                                        <Setter Target="Shadow.State" Value="Pressed"/>
                                        <!--<Setter Target="Shadow.ShadowOpacity" Value="0"/>-->
                                    </VisualState.Setters>
                                </VisualState>

                                <VisualState x:Name="Disabled">
                                    <VisualState.Setters>
                                        <Setter Target="RootGrid.Background" Value="{ThemeResource ButtonRevealBackgroundDisabled}" />
                                        <Setter Target="RootGrid.BorderBrush" Value="{ThemeResource ButtonRevealBorderBrushDisabled}" />
                                        <Setter Target="RootGrid.Foreground" Value="{ThemeResource ButtonForegroundDisabled}" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ProgressStates">
                                <VisualStateGroup.Transitions>
                                    <VisualTransition From="Idle" To="Busy">
                                        <Storyboard >
                                            <DoubleAnimation Storyboard.TargetName="ProgressToPointCollectionBridge" Storyboard.TargetProperty="Progress" To="1" EnableDependentAnimation="True" Duration="0:0:0.3">
                                                <DoubleAnimation.EasingFunction>
                                                    <CubicEase EasingMode="EaseOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                            <DoubleAnimation Storyboard.TargetName="ShapeCompositeTransform" Storyboard.TargetProperty="Rotation" To="180" EnableDependentAnimation="True" Duration="0:0:0.3">
                                                <DoubleAnimation.EasingFunction>
                                                    <CubicEase EasingMode="EaseOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>

                                        </Storyboard>
                                    </VisualTransition>
                                    <VisualTransition From="Busy" To="Idle">
                                        <Storyboard >
                                            <DoubleAnimation Storyboard.TargetName="ProgressToPointCollectionBridge" Storyboard.TargetProperty="Progress" To="0" EnableDependentAnimation="True" Duration="0:0:0.3">
                                                <DoubleAnimation.EasingFunction>
                                                    <CubicEase EasingMode="EaseOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                            <DoubleAnimation Storyboard.TargetName="ShapeCompositeTransform" Storyboard.TargetProperty="Rotation" To="360" EnableDependentAnimation="True" Duration="0:0:0.3">
                                                <DoubleAnimation.EasingFunction>
                                                    <CubicEase EasingMode="EaseOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                        </Storyboard>
                                    </VisualTransition>
                                </VisualStateGroup.Transitions>
                                <VisualState x:Name="Idle" />
                                <VisualState x:Name="Busy">
                                    <VisualState.Setters>
                                        <Setter Target="ProgressToPointCollectionBridge.Progress"
                                                Value="1" />
                                        <Setter Target="ShapeCompositeTransform.Rotation" Value="180"/>
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="PromodoroStates">
                                <VisualStateGroup.Transitions>
                                    <VisualTransition GeneratedDuration="0:0:3">
                                        <VisualTransition.GeneratedEasingFunction>
                                            <CubicEase EasingMode="EaseOut" />
                                        </VisualTransition.GeneratedEasingFunction>
                                    </VisualTransition>
                                </VisualStateGroup.Transitions>
                                <VisualState x:Name="Inwork" />
                                <VisualState x:Name="Break">
                                </VisualState>
                            </VisualStateGroup>

                        </VisualStateManager.VisualStateGroups>
                        <Border.Resources>
                            <local:ProgressToPointCollectionBridge x:Name="ProgressToPointCollectionBridge"
                                           Progress="0">
                                <PointCollection>21.00,12.00 20.55,12.30 20.09,12.61 19.64,12.91 19.18,13.21 18.73,13.52 18.27,13.82 17.82,14.12 17.36,14.42 16.91,14.73 16.45,15.03 16.00,15.33 15.55,15.64 15.09,15.94 14.64,16.24 14.18,16.55 13.73,16.85 13.27,17.15 12.82,17.45 12.36,17.76 11.91,18.06 11.45,18.36 11.00,18.67 10.55,18.97 10.09,19.27 9.64,19.58 9.18,19.88 8.73,20.18 8.27,20.48 7.82,20.79 7.36,21.09 6.91,21.39 6.45,21.70 6.00,22.00 6.00,21.39 6.00,20.79 6.00,20.18 6.00,19.58 6.00,18.97 6.00,18.36 6.00,17.76 6.00,17.15 6.00,16.55 6.00,15.94 6.00,15.33 6.00,14.73 6.00,14.12 6.00,13.52 6.00,12.91 6.00,12.30 6.00,11.70 6.00,11.09 6.00,10.48 6.00,9.88 6.00,9.27 6.00,8.67 6.00,8.06 6.00,7.45 6.00,6.85 6.00,6.24 6.00,5.64 6.00,5.03 6.00,4.42 6.00,3.82 6.00,3.21 6.00,2.61 6.00,2.00 6.44,2.29 6.88,2.59 7.32,2.88 7.76,3.18 8.21,3.47 8.65,3.76 9.09,4.06 9.53,4.35 9.97,4.65 10.41,4.94 10.85,5.24 11.29,5.53 11.74,5.82 12.18,6.12 12.62,6.41 13.06,6.71 13.50,7.00 13.94,7.29 14.38,7.59 14.82,7.88 15.26,8.18 15.71,8.47 16.15,8.76 16.59,9.06 17.03,9.35 17.47,9.65 17.91,9.94 18.35,10.24 18.79,10.53 19.24,10.82 19.68,11.12 20.12,11.41 20.56,11.71</PointCollection>
                                <PointCollection>22.00,12.00 21.98,12.63 21.92,13.25 21.82,13.87 21.69,14.49 21.51,15.09 21.30,15.68 21.05,16.26 20.76,16.82 20.44,17.36 20.09,17.88 19.71,18.37 19.29,18.85 18.85,19.29 18.37,19.71 17.88,20.09 17.36,20.44 16.82,20.76 16.26,21.05 15.68,21.30 15.09,21.51 14.49,21.69 13.87,21.82 13.25,21.92 12.63,21.98 12.00,22.00 11.37,21.98 10.75,21.92 10.13,21.82 9.51,21.69 8.91,21.51 8.32,21.30 7.74,21.05 7.18,20.76 6.64,20.44 6.12,20.09 5.63,19.71 5.15,19.29 4.71,18.85 4.29,18.37 3.91,17.88 3.56,17.36 3.24,16.82 2.95,16.26 2.70,15.68 2.49,15.09 2.31,14.49 2.18,13.87 2.08,13.25 2.02,12.63 2.00,12.00 2.02,11.37 2.08,10.75 2.18,10.13 2.31,9.51 2.49,8.91 2.70,8.32 2.95,7.74 3.24,7.18 3.56,6.64 3.91,6.12 4.29,5.63 4.71,5.15 5.15,4.71 5.63,4.29 6.12,3.91 6.64,3.56 7.18,3.24 7.74,2.95 8.32,2.70 8.91,2.49 9.51,2.31 10.13,2.18 10.75,2.08 11.37,2.02 12.00,2.00 12.63,2.02 13.25,2.08 13.87,2.18 14.49,2.31 15.09,2.49 15.68,2.70 16.26,2.95 16.82,3.24 17.36,3.56 17.88,3.91 18.37,4.29 18.85,4.71 19.29,5.15 19.71,5.63 20.09,6.12 20.44,6.64 20.76,7.18 21.05,7.74 21.30,8.32 21.51,8.91 21.69,9.51 21.82,10.13 21.92,10.75 21.98,11.37</PointCollection>
                                <PointCollection>20,20 20,20 20,20 20,20 20,20 20,20 20,20 20,20 20,20 20,20 20,20 20,20 20,20 20,20 20,20 20,20 20,20 20,20 20,20 20,20 20,20 20,20 20,20 20,20 20,20 4,20 4,20 4,20 4,20 4,20 4,20 4,20 4,20 4,20 4,20 4,20 4,20 4,20 4,20 4,20 4,20 4,20 4,20 4,20 4,20 4,20 4,20 4,20 4,20 4,20 4,4 4,4 4,4 4,4 4,4 4,4 4,4 4,4 4,4 4,4 4,4 4,4 4,4 4,4 4,4 4,4 4,4 4,4 4,4 4,4 4,4 4,4 4,4 4,4 4,4 20,4 20,4 20,4 20,4 20,4 20,4 20,4 20,4 20,4 20,4 20,4 20,4 20,4 20,4 20,4 20,4 20,4 20,4 20,4 20,4 20,4 20,4 20,4 20,4 20,4</PointCollection>
                            </local:ProgressToPointCollectionBridge>

                        </Border.Resources>
                        <Grid>


                            <Grid Height="24" Width="24" RenderTransformOrigin=".5,.5">
                                <Grid.RenderTransform>
                                    <CompositeTransform x:Name="ShapeCompositeTransform"/>
                                </Grid.RenderTransform>


                                <local:InsetDropShadowPanel  BlurRadius="8" 
                                                           ShadowOpacity="1" 
                                                           x:Name="Shadow" 
                                                           Color="{TemplateBinding ShadowColor}">
                                    <Polygon Points="{Binding Source={StaticResource ProgressToPointCollectionBridge},Path=Points}"
                                     Fill="{TemplateBinding Foreground}"
                                     Stroke="{TemplateBinding BorderBrush}"
                                     StrokeThickness="2"
                                     Stretch="None"
                                     StrokeEndLineCap="Round"
                                     x:Name="Shape"/>
                                </local:InsetDropShadowPanel>
                                <local:InsetPanel RelativeElement="{Binding ElementName=Shape}" x:Name="Inset" Visibility="Collapsed"/>
                                <local:OutlinePanel RelativeElement="{Binding ElementName=Shape}" x:Name="Outline" />

                            </Grid>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>



</ResourceDictionary>
