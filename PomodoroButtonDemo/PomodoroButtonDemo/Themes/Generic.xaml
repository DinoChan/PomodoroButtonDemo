<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:PomodoroButtonDemo">



    <Style TargetType="local:PomodoroStateButton">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Foreground" Value="Transparent"/>
        <Setter Property="BorderBrush" Value="{ThemeResource SystemBaseHighColor}"/>
        <Setter Property="BorderThickness" Value="1"/>
        
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:PomodoroStateButton">
                    <Border Background="{TemplateBinding Background}"
                          
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Padding="{TemplateBinding Padding}"
                            x:Name="RootGrid">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualStateGroup.Transitions>
                                    <VisualTransition GeneratedDuration="0:0:3">
                                        <VisualTransition.GeneratedEasingFunction>
                                            <CubicEase EasingMode="EaseOut" />
                                        </VisualTransition.GeneratedEasingFunction>
                                    </VisualTransition>
                                </VisualStateGroup.Transitions>
                                <VisualState x:Name="Normal" />
                                <!--<VisualState x:Name="PointerOver">
                                    <VisualState.Setters>
                                        <Setter Target="RootGrid.(RevealBrush.State)" Value="PointerOver"/>
                                        <Setter Target="RootGrid.Background" Value="{ThemeResource SystemChromeLowColor}"/>
                                        <Setter Target="RootGrid.BorderBrush" Value="{ThemeResource InkToolbarButtonBorderBrushPointerOver}"/>
                                        <Setter Target="Foreground" Value="{ThemeResource InkToolbarButtonBorderBrushPointerOver}"/>
                                    </VisualState.Setters>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <VisualState.Setters>
                                        <Setter Target="RootGrid.(RevealBrush.State)" Value="Pressed"/>
                                        <Setter Target="RootGrid.Background" Value="{ThemeResource SystemChromeLowColor}"/>
                                        <Setter Target="RootGrid.BorderBrush" Value="{ThemeResource SystemControlForegroundBaseHighBrush}"/>
                                    </VisualState.Setters>
                                    <Storyboard>

                                    </Storyboard>
                                </VisualState>-->

                                <VisualState x:Name="Disabled">
                                    <VisualState.Setters>
                                        <Setter Target="RootGrid.Background" Value="{ThemeResource ButtonRevealBackgroundDisabled}" />
                                        <Setter Target="RootGrid.BorderBrush" Value="{ThemeResource ButtonRevealBorderBrushDisabled}" />
                                        <Setter Target="RootGrid.Foreground" Value="{ThemeResource ButtonForegroundDisabled}" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ProgressStates">
                                <VisualStateGroup.Transitions>
                                    <VisualTransition From="Idle" To="Busy">
                                        <Storyboard >
                                            <DoubleAnimation Storyboard.TargetName="ProgressToPointCollectionBridge" Storyboard.TargetProperty="Progress" To="1" EnableDependentAnimation="True" Duration="0:0:0.3">
                                                <DoubleAnimation.EasingFunction>
                                                    <CubicEase EasingMode="EaseOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                            <DoubleAnimation Storyboard.TargetName="ShapeCompositeTransform" Storyboard.TargetProperty="Rotation" To="180" EnableDependentAnimation="True" Duration="0:0:0.3">
                                                <DoubleAnimation.EasingFunction>
                                                    <CubicEase EasingMode="EaseOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                                             
                                        </Storyboard>
                                    </VisualTransition>
                                    <VisualTransition From="Busy" To="Idle">
                                        <Storyboard >
                                            <DoubleAnimation Storyboard.TargetName="ProgressToPointCollectionBridge" Storyboard.TargetProperty="Progress" To="0" EnableDependentAnimation="True" Duration="0:0:0.3">
                                                <DoubleAnimation.EasingFunction>
                                                    <CubicEase EasingMode="EaseOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                            <DoubleAnimation Storyboard.TargetName="ShapeCompositeTransform" Storyboard.TargetProperty="Rotation" To="360" EnableDependentAnimation="True" Duration="0:0:0.3">
                                                <DoubleAnimation.EasingFunction>
                                                    <CubicEase EasingMode="EaseOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                        </Storyboard>
                                    </VisualTransition>
                                </VisualStateGroup.Transitions>
                                <VisualState x:Name="Idle" />
                                <VisualState x:Name="Busy">
                                    <VisualState.Setters>
                                        <Setter Target="ProgressToPointCollectionBridge.Progress"
                                                Value="1" />
                                        <Setter Target="ShapeCompositeTransform.Rotation" Value="180"/>
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="PromodoroStates">
                                <VisualStateGroup.Transitions>
                                    <VisualTransition GeneratedDuration="0:0:3">
                                        <VisualTransition.GeneratedEasingFunction>
                                            <CubicEase EasingMode="EaseOut" />
                                        </VisualTransition.GeneratedEasingFunction>
                                    </VisualTransition>
                                </VisualStateGroup.Transitions>
                                <VisualState x:Name="Inwork" />
                                <VisualState x:Name="Break">
                                    <!--<VisualState.Setters>
                                        <Setter Target="PointOverElement.(UIElement.Opacity)"
                                                Value="1" />
                                    </VisualState.Setters>-->
                                </VisualState>
                            </VisualStateGroup>

                        </VisualStateManager.VisualStateGroups>
                        <Border.Resources>
                            <local:ProgressToPointCollectionBridge x:Name="ProgressToPointCollectionBridge"
                                           Progress="0">
                                <PointCollection>83.00,48.00 81.21,49.27 79.42,50.55 77.64,51.82 75.85,53.09 74.06,54.36 72.27,55.64 70.48,56.91 68.70,58.18 66.91,59.45 65.12,60.73 63.33,62.00 61.55,63.27 59.76,64.55 57.97,65.82 56.18,67.09 54.39,68.36 52.61,69.64 50.82,70.91 49.03,72.18 47.24,73.45 45.45,74.73 43.67,76.00 41.88,77.27 40.09,78.55 38.30,79.82 36.52,81.09 34.73,82.36 32.94,83.64 31.15,84.91 29.36,86.18 27.58,87.45 25.79,88.73 24.00,90.00 24.00,87.45 24.00,84.91 24.00,82.36 24.00,79.82 24.00,77.27 24.00,74.73 24.00,72.18 24.00,69.64 24.00,67.09 24.00,64.55 24.00,62.00 24.00,59.45 24.00,56.91 24.00,54.36 24.00,51.82 24.00,49.27 24.00,46.73 24.00,44.18 24.00,41.64 24.00,39.09 24.00,36.55 24.00,34.00 24.00,31.45 24.00,28.91 24.00,26.36 24.00,23.82 24.00,21.27 24.00,18.73 24.00,16.18 24.00,13.64 24.00,11.09 24.00,8.55 24.00,6.00 25.74,7.24 27.47,8.47 29.21,9.71 30.94,10.94 32.68,12.18 34.41,13.41 36.15,14.65 37.88,15.88 39.62,17.12 41.35,18.35 43.09,19.59 44.82,20.82 46.56,22.06 48.29,23.29 50.03,24.53 51.76,25.76 53.50,27.00 55.24,28.24 56.97,29.47 58.71,30.71 60.44,31.94 62.18,33.18 63.91,34.41 65.65,35.65 67.38,36.88 69.12,38.12 70.85,39.35 72.59,40.59 74.32,41.82 76.06,43.06 77.79,44.29 79.53,45.53 81.26,46.76</PointCollection>
                                <PointCollection>85.00,48.00 84.93,50.32 84.71,52.64 84.34,54.93 83.84,57.20 83.19,59.43 82.40,61.62 81.48,63.75 80.42,65.82 79.24,67.83 77.93,69.75 76.51,71.58 74.97,73.33 73.33,74.97 71.58,76.51 69.75,77.93 67.83,79.24 65.82,80.42 63.75,81.48 61.62,82.40 59.43,83.19 57.20,83.84 54.93,84.34 52.64,84.71 50.32,84.93 48.00,85.00 45.68,84.93 43.36,84.71 41.07,84.34 38.80,83.84 36.57,83.19 34.38,82.40 32.25,81.48 30.18,80.42 28.17,79.24 26.25,77.93 24.42,76.51 22.67,74.97 21.03,73.33 19.49,71.58 18.07,69.75 16.76,67.83 15.58,65.82 14.52,63.75 13.60,61.62 12.81,59.43 12.16,57.20 11.66,54.93 11.29,52.64 11.07,50.32 11.00,48.00 11.07,45.68 11.29,43.36 11.66,41.07 12.16,38.80 12.81,36.57 13.60,34.38 14.52,32.25 15.58,30.18 16.76,28.17 18.07,26.25 19.49,24.42 21.03,22.67 22.67,21.03 24.42,19.49 26.25,18.07 28.17,16.76 30.18,15.58 32.25,14.52 34.38,13.60 36.57,12.81 38.80,12.16 41.07,11.66 43.36,11.29 45.68,11.07 48.00,11.00 50.32,11.07 52.64,11.29 54.93,11.66 57.20,12.16 59.43,12.81 61.62,13.60 63.75,14.52 65.82,15.58 67.83,16.76 69.75,18.07 71.58,19.49 73.33,21.03 74.97,22.67 76.51,24.42 77.93,26.25 79.24,28.17 80.42,30.18 81.48,32.25 82.40,34.38 83.19,36.57 83.84,38.80 84.34,41.07 84.71,43.36 84.93,45.68</PointCollection>
                                <PointCollection>80,80 80,80 80,80 80,80 80,80 80,80 80,80 80,80 80,80 80,80 80,80 80,80 80,80 80,80 80,80 80,80 80,80 80,80 80,80 80,80 80,80 80,80 80,80 80,80 80,80 16,80 16,80 16,80 16,80 16,80 16,80 16,80 16,80 16,80 16,80 16,80 16,80 16,80 16,80 16,80 16,80 16,80 16,80 16,80 16,80 16,80 16,80 16,80 16,80 16,80 16,16 16,16 16,16 16,16 16,16 16,16 16,16 16,16 16,16 16,16 16,16 16,16 16,16 16,16 16,16 16,16 16,16 16,16 16,16 16,16 16,16 16,16 16,16 16,16 16,16 80,16 80,16 80,16 80,16 80,16 80,16 80,16 80,16 80,16 80,16 80,16 80,16 80,16 80,16 80,16 80,16 80,16 80,16 80,16 80,16 80,16 80,16 80,16 80,16 80,16</PointCollection>
                            </local:ProgressToPointCollectionBridge>

                        </Border.Resources>
                        <Grid Height="96" Width="96" RenderTransformOrigin=".5,.5">
                            <Grid.RenderTransform>
                                <CompositeTransform x:Name="ShapeCompositeTransform" CenterX=".5" CenterY=".5"/>
                            </Grid.RenderTransform>
                            <local:OutlinePanel>
                                <Polygon Points="{Binding Source={StaticResource ProgressToPointCollectionBridge},Path=Points}"
                                     Fill="{TemplateBinding Foreground}"
                                     Stroke="{TemplateBinding BorderBrush}"
                                     StrokeThickness="7"
                                     Stretch="None"
                                     StrokeEndLineCap="Round"
                                         Opacity="0.1"
                                     />

                            </local:OutlinePanel>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>


    <Style TargetType="local:OutlinePanel">
        <Setter Property="IsTabStop" Value="False" />
        <Setter Property="HorizontalAlignment" Value="Stretch"/>
        <Setter Property="HorizontalContentAlignment" Value="Left"/>
        <Setter Property="VerticalAlignment" Value="Stretch"/>
        <Setter Property="VerticalContentAlignment" Value="Stretch"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:OutlinePanel">
                    <Grid Background="{TemplateBinding Background}"
                          BorderBrush="{TemplateBinding BorderBrush}"
                          BorderThickness="{TemplateBinding BorderThickness}"
                          HorizontalAlignment="{TemplateBinding HorizontalAlignment}"
                          VerticalAlignment="{TemplateBinding VerticalAlignment}">
                        <Border x:Name="OutlineBorder" 
                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>
